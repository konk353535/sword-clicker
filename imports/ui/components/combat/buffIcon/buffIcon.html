<template name="buffIcon">
  {{#unless hideBuff}}
    {{#unless hideBuffFromTop}}
      <div class="buff-icon-container icon-box {{classes}} {{#if small}}small-icon{{else}}medium-icon{{/if}}" style="position: relative" id="buff-{{#if small}}small{{else}}medium{{/if}}-{{buff.uid}}">
        {{#if buffIcon}}
          <img src="/icons/{{buffIcon}}" class="small-icon" />
        {{/if}}
        {{#if buffCustom}}
          <span style="position: absolute; bottom: 1px; right: 1px; font-size: 10px;
            line-height: 10px;">
            {{buff.customText}}
          </span>
        {{else if $gte buff.stacks 1}}
          <span style="position: absolute; bottom: 1px; right: 1px; font-size: 10px;
            line-height: 10px;">
            {{buff.stacks}}
          </span>
        {{else if $lt (moDiff buff.data.endDate moNow 'seconds') 59}}
          {{#if small}}
            <span style="position: absolute; bottom: 1px; right: 1px; font-size: 10px;
              line-height: 10px;">
              {{moDiff buff.data.endDate moNow 'seconds'}}
            </span>
          {{else}}
            <span class="text-muted" style="position: absolute; bottom: 2px; right: 2px; font-size: 10px; line-height: 10px;">
              {{moDiff buff.data.endDate moNow 'seconds'}}
            </span>
          {{/if}}
        {{else if $lte buff.duration 9}}
          {{#if small}}
            <span style="position: absolute; bottom: 1px; right: 1px; font-size: 10px;
              line-height: 10px;">
              {{> formatNumber number=buff.duration blankZero=true decimal=1}}
            </span>
          {{else}}
            <span class="text-muted" style="position: absolute; bottom: 2px; right: 2px; font-size: 10px; line-height: 10px;">
              {{> formatNumber number=buff.duration blankZero=true decimal=1}}
            </span>
          {{/if}}
        {{else if $lte buff.duration 59}}
          {{#if small}}
            <span style="position: absolute; bottom: 1px; right: 1px; font-size: 10px;
              line-height: 10px;">
              {{> formatNumber number=buff.duration blankZero=true decimal=0}}
            </span>
          {{else}}
            <span class="text-muted" style="position: absolute; bottom: 2px; right: 2px; font-size: 10px; line-height: 10px;">
              {{> formatNumber number=buff.duration blankZero=true decimal=0}}
            </span>
          {{/if}}
        {{/if}}
      </div>
    {{/unless}}
  {{/unless}}
</template>

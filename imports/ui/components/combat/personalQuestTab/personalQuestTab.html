<template name="personalQuestTab">
  <h1 class="d-flex">
    Personal Quest
    <div class="dropdown ml-2">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Level {{usersCurrentLevel}}
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        {{#each levelsList}}
          <a class="dropdown-item select-level" href="#" data-level={{this}}>Level {{this}}</a>
        {{/each}}
      </div>
    </div>
  </h1>

  <!-- Post fight banner -->
  {{#if finishedBattle}}
    <div class="d-flex alert alert-secondary" role="alert">
      {{#if finishedBattle.win}}
        <strong class="text-success d-flex align-items-center mr-1">Victory</strong>
      {{else}}
        <strong class="text-danger d-flex align-items-center mr-1">Defeat</strong>
      {{/if}}

      <div class="d-flex align-items-center" style="flex: 1 1 auto">
        {{#each finishedBattle.finalTickEvents}}
          {{#if $eq this.type 'xp'}}
            <div class="ml-1">
              +{{this.amount}} <i class="lilIcon-{{this.skill}}"></i>
            </div>
          {{/if}}

          {{#if $eq this.type 'item'}}
            <div class="ml-1 d-flex align-items-center">
              +{{this.amount}}
              <img src="/icons/{{this.icon}}.svg" class="small-icon">
            </div>
          {{/if}}
        {{/each}}
      </div>
      <button type="button" class="btn btn-sm btn-secondary btn-close-finishedBattle">Close</button>
    </div>
  {{/if}}

  <div class="d-flex justify-content-center flex-column align-items-center" style="height: 300px">
    {{#if $eq usersCurrentLevel maxLevel}}
      <h4>Wave {{maxLevelCurrentWave}} / 5</h4>
      <button class="btn btn-primary mt-1 find-battle">Battle</button>
    {{else}}
      <h4>Already Completed All Waves</h4>  
      <button class="btn btn-primary mt-1 random-battle">Battle Random Wave</button>
    {{/if}}
  </div>
</template>

<template name="craftingPage">

  {{#if craftingSkill}}
    {{> skillHeader skill=craftingSkill}}

    <div class="my-3 {{#unless inCurrentBattle}}{{#unless summaryListDisabled}}hidden-xl-up{{/unless}}{{/unless}}">
      {{#if crafting.currentlyCrafting}}
        <div class="d-flex flex-row align-items-center">
          <span style="min-width: 100px;">Crafting: &nbsp; </span> 
          {{#each crafting.currentlyCrafting}}
            {{> craftingDuration craftingProcess=this isCrafting=true}}
          {{/each}}
        </div>
      {{/if}}
        {{#if crafting.currentlyReforging}}
        <div class="d-flex flex-row align-items-center">
          <span style="min-width: 100px;">Reforging: &nbsp; </span>
          {{#each crafting.currentlyReforging}}
            {{> craftingDuration craftingProcess=this isReforging=true}}
          {{/each}}
        </div>
      {{/if}}
    </div>

    <h2>Items</h2>

    <ul class="nav nav-tabs my-3">
      <li class="nav-item item-filter" data-filter="all-items">
        <a class="nav-link {{#if $eq itemFilter 'all-items'}}active{{/if}}" href="#">All</a>
      </li>
      <li class="nav-item item-filter" data-filter="visible-items">
        <a class="nav-link {{#if $eq itemFilter 'visible-items'}}active{{/if}}" href="#">Unhidden</a>
      </li>
      <li class="nav-item item-filter" data-filter="hidden-items">
        <a class="nav-link {{#if $eq itemFilter 'hidden-items'}}active{{/if}}" href="#">Hidden</a>
      </li>
    </ul>

      {{> itemList items=items itemFilter=itemFilter}}

      {{#if $gt items.length 5}}
        {{#if itemViewLimit}}
          <div class="item-icon-container small icon-box show-all-items" style="cursor: pointer">
            More
          </div>
        {{else}}
          <div class="item-icon-container small icon-box show-less-items" style="cursor: pointer">
            Less
          </div>
        {{/if}}
      {{/if}}


    <h2>Recipes</h2>
    
    <ul class="nav nav-tabs my-3">
      <li class="nav-item crafting-filter" data-filter="all">
        <a class="nav-link {{#if $eq recipeFilter 'all'}}active{{/if}}" href="#">All</a>
      </li>
      <li class="nav-item crafting-filter" data-filter="crafting">
        <a class="nav-link {{#if $eq recipeFilter 'crafting'}}active{{/if}}" href="#">Crafting</a>
      </li>
      <li class="nav-item crafting-filter" data-filter="mining">
        <a class="nav-link {{#if $eq recipeFilter 'mining'}}active{{/if}}" href="#">Mining</a>
      </li>
      <li class="nav-item crafting-filter" data-filter="woodcutting">
        <a class="nav-link {{#if $eq recipeFilter 'woodcutting'}}active{{/if}}" href="#">Woodcutting</a>
      </li>
      <li class="nav-item crafting-filter" data-filter="combat">
        <a class="nav-link {{#if $eq recipeFilter 'combat'}}active{{/if}}" href="#">Combat</a>
      </li>
      <li class="nav-item crafting-filter" data-filter="astronomy">
        <a class="nav-link {{#if $eq recipeFilter 'astronomy'}}active{{/if}}" href="#">Astronomy</a>
      </li>
    </ul>

    {{> craftingList recipes=recipes recipeFilter=recipeFilter}}

  {{else}}
    <div 
      class="d-flex justify-content-center align-items-center flex-column"
      style="height: 200px; margin-top: 100px;">
      <div class="mb-3">You haven't learned the crafting skill yet</div>
      <button class="btn btn-primary learn-now">Learn Now</button>
    </div>
  {{/if}}
</template>

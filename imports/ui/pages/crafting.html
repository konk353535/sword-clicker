<template name="craftingPage">

  {{#if craftingSkill}}
    <div class="my-3">
      {{#each crafting.currentlyCrafting}}
        {{> craftingDuration craftingProcess=this}}
      {{/each}}
    </div>

    <h1>Crafting</h1>
    <p>Level: {{craftingSkill.level}}</p>
    <p>XP: {{craftingSkill.xp}} / {{craftingSkill.xpToLevel}}</p>

    <h2>Items</h2>
    <div class="d-flex">
      {{#each items}}
        {{> itemIcon item=this}}
      {{/each}}
    </div>

    <h2>Recipes</h2>
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="align-middle text-center">Name</th>
          <th class="align-middle text-center">Icon</th>
          <th class="align-middle text-center">Level Reqs</th>
          <th class="align-middle text-center">Craft Time</th>          
          <th class="align-middle text-center">Item Reqs</th>
          <th class="align-middle text-center">Description</th>
        </tr>  
      </thead>
      <tbody>
        {{#each recipes}}
          <tr class="craft-row text-center" style="cursor: pointer" data-recipe={{this.id}}>
            <td class="align-middle text-capitalize">{{this.name}}</td>
            <td class="align-middle">
              <object data="/icons/{{this.icon}}.svg" class="ore-icon" type="image/svg+xml"></object>
            </td>
            <td class="align-middle {{#if this.notMetLevelReq}}text-danger{{/if}}">
              {{this.requiredCraftingLevel}}
            </td>
            <td class="align-middle">{{this.timeToCraft}}s</td>
            <td class="align-middle">{{ > requiredItems requiredItems=this.requiredItems}}</td>
            <td class="align-middle">{{this.description}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  {{else}}
    <div 
      class="d-flex justify-content-center align-items-center flex-column"
      style="height: 200px; margin-top: 100px;">
      <div class="mb-3">You haven't learning the crafting skill yet</div>
      <button class="btn btn-primary learn-now">Learn Now</button>
    </div>
  {{/if}}
</template>

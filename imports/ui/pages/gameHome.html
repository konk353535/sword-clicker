<template name="gameHomePage">
  <div class="container mt-2">
    <div class="d-flex">
      <div class="mr-3">
        <div class="text-muted mb-1">Links</div>
        <a href="/shop" class="side-link-item">Shop</a>
        <a href="/skills" class="side-link-item">Skills</a>
        <a class="side-link-item" style="cursor: not-allowed;">Clan</a>
        <a href="/achievements" class="side-link-item">Achievements</a>
        <a href="/patchNotes" class="side-link-item">FAQ</a>
        <a href="/updates" class="side-link-item new-update-color">New Things</a>
      </div>
      <div class="home-page-content mr-3">

        {{#if inCurrentBattle}}
          <div class="d-flex align-items-center text-danger">
            You are currently in a battle
            <div class="d-flex flex-grow justify-content-end">
              <a href="/newCombat" class="btn btn-secondary">View</a>
            </div>
          </div>
        {{/if}}

        {{#if firstPendingInvite}}
          <div class="d-flex align-items-center mt-3">
            Party invite from {{firstPendingInvite.leaderName}}
            <div class="d-flex flex-grow justify-content-end">
              <button class="btn btn-primary mr-2 accept-party-invite" data-id={{firstPendingInvite._id}}>Accept</button>
              <button class="btn btn-danger decline-party-invite" data-id={{firstPendingInvite._id}}>Decline</button>
            </div>
          </div>
        {{/if}}

        <!-- Mining -->
        <div class="d-flex flex-column mt-3">
          <div class="d-flex align-items-center">
            Mining Carts
          </div>
          <div class="d-flex flex-column mt-2 pt-1" style="border-top: 1px solid #DFDFDF">
            {{> miningCollector}}
          </div>
        </div>

        <!-- Crafting -->
        <div class="d-flex flex-column mt-3">
          <div class="d-flex align-items-center">
            Workbench
            {{#if firstCrafting}}
              <div class="d-flex flex-grow justify-content-end">
                <div class="text-muted ml-3">
                  {{> readableDuration endDate=lastCrafting.endDate}}
                </div>
              </div>
            {{/if}}
          </div>
          <div class="d-flex flex-column mt-2 pt-1" style="border-top: 1px solid #DFDFDF">
            {{#if firstCrafting}}
              {{> firstCraftingUI data=firstCrafting}}
            {{else}}
              <div class="text-muted">Empty</div>
            {{/if}}
            <div class="d-flex flex-wrap">
              {{#each otherCrafting}}
                <div class="d-flex icon-box-new mr-1 mt-1">
                  <div class="align-items-center d-flex" style="border: 1px solid #DFDFDF; border-radius: 4px; padding: 8px;">
                    <img src="/icons/{{this.icon}}" class="extra-small-icon mr-1">
                    <div>{{this.amount}}</div>
                    <i class="fas fa-times icon-danger-hover cancel-crafting cursor-pointer ml-2" data-enddate="{{this.endDate}}"></i>
                  </div>
                </div>
              {{/each}}
            </div>
          </div>
        </div>

        <!-- Lumber -->
        <div class="d-flex flex-column mt-3">
          <div class="d-flex align-items-center">
            Lumber Carriages
            <div class="d-flex justify-content-end flex-grow">
              <button class="btn btn-primary btn-sm ml-3">
                Collect
              </button>
            </div>
          </div>
          <div class="d-flex flex-wrap mt-2 pt-1" style="border-top: 1px solid #DFDFDF">
            <div class="d-flex icon-box-new mr-1 mt-1">
              <div class="align-items-center d-flex" style="border: 1px solid #DFDFDF; border-radius: 4px; padding: 8px;">
                <img src="/icons/beechLog.png" class="extra-small-icon mr-1">
                <div>300 / 500</div>
              </div>
            </div>
            <div class="d-flex icon-box-new mr-1 mt-1">
              <div class="align-items-center d-flex" style="border: 1px solid #DFDFDF; border-radius: 4px; padding: 8px;">
                <img src="/icons/pineLog.png" class="extra-small-icon mr-1">
                <div>56 / 1043</div>
              </div>
            </div>
            <div class="d-flex icon-box-new mr-1 mt-1">
              <div class="align-items-center d-flex" style="border: 1px solid #DFDFDF; border-radius: 4px; padding: 8px;">
                <img src="/icons/ashLog.png" class="extra-small-icon mr-1">
                <div>23 / 60</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Farming -->
        <div class="d-flex flex-column mt-3">
          <div class="d-flex align-items-center">
            Farm Plots
            <div class="d-flex flex-grow justify-content-end">
              {{#if lastGrownThing}}
                <div class="text-muted ml-3">
                  {{> readableDuration endDate=lastGrownThing.maturityDate}}
                </div>
              {{/if}}
            </div>
          </div>
          <div class="d-flex flex-wrap mt-2 pt-1" style="border-top: 1px solid #DFDFDF">
            {{#each farmingSpaces}}
              {{> farmSpace farmSpace=this classes="medium-icon"}}
            {{/each}}
            {{#if showPickAll}}
              <div class="d-flex align-items-center mt-1 ml-1">
                <button class="btn btn-primary collect-plants">
                  Pick All
                </button>
              </div>
            {{/if}}
          </div>
        </div>
        <!-- Adventures -->
        <div class="d-flex flex-column mt-3">
          <div class="d-flex align-items-center">
            Adventures <div class="text-muted ml-3">1h 46m</div>
            <div class="d-flex justify-content-end flex-grow">
              <button class="btn btn-primary btn-sm ml-3">
                Collect All
              </button>
            </div>
          </div>
          <div class="d-flex flex-column mt-2 pt-1" style="border-top: 1px solid #DFDFDF">
            <div class="adventure-item-container d-flex flex-column my-1 mx-1 p-2 active-adventure">
              <div class="d-flex align-items-center">
                <img src="/icons/grasshopper.svg" class="medium-icon">
                <div class="d-flex flex-column ml-3 flex-grow hidden-md-down">
                  <div class="text-capitalize">Grass Field</div>
                </div>
                <div class="d-flex flex-column mx-3 flex-grow">
                  <div class="text-success">Victory</div>
                </div>
                <div class="d-flex mx-3 align-items-center justify-content-center hidden-xs-down" style="flex: 10 10 auto;">
                    <div class="d-flex align-items-center" style="flex: 1 1 auto">
                          <div class="ml-1">
                            +57 <i class="lilIcon-attack"></i>
                          </div>
                          <div class="ml-1">
                            +57 <i class="lilIcon-health"></i>
                          </div>
                          <div class="ml-1">
                            +57 <i class="lilIcon-defense"></i>
                          </div>
                    </div>
                </div>
                <div class="d-flex flex-column align-items-end justify-content-center ml-3" style="width: 10%; flex: 1 1 auto;">
                    <button class="btn btn-success collect-adventure-btn" style="width: 100px;" data-id="6tjmMRo8EaaANRcud">
                      Collect
                    </button>
                </div>
              </div>
              <div class="d-flex align-items-center mt-2 hidden-sm-up" style="flex: 1 1 auto">
                    <div class="ml-1">
                      +57 <i class="lilIcon-attack"></i>
                    </div>
                    <div class="ml-1">
                      +57 <i class="lilIcon-health"></i>
                    </div>
                    <div class="ml-1">
                      +57 <i class="lilIcon-defense"></i>
                    </div>
              </div>
            </div>
            <div class="adventure-item-container d-flex flex-column my-1 mx-1 p-2 active-adventure">
              <div class="d-flex align-items-center">
                <img src="/icons/grasshopper.svg" class="medium-icon">
                <div class="d-flex flex-column ml-3 flex-grow hidden-md-down">
                  <div class="text-capitalize">Grass Field</div>
                </div>
                <div class="d-flex flex-column mx-3 flex-grow">
                  <div class="text-success">Victory</div>
                </div>
                <div class="d-flex mx-3 align-items-center justify-content-center hidden-xs-down" style="flex: 10 10 auto;">
                    <div class="d-flex align-items-center" style="flex: 1 1 auto">
                          <div class="ml-1">
                            +57 <i class="lilIcon-attack"></i>
                          </div>
                          <div class="ml-1">
                            +57 <i class="lilIcon-health"></i>
                          </div>
                          <div class="ml-1">
                            +57 <i class="lilIcon-defense"></i>
                          </div>
                    </div>
                </div>
                <div class="d-flex flex-column align-items-end justify-content-center ml-3" style="width: 10%; flex: 1 1 auto;">
                    <button class="btn btn-success collect-adventure-btn" style="width: 100px;" data-id="6tjmMRo8EaaANRcud">
                      Collect
                    </button>
                </div>
              </div>
              <div class="d-flex align-items-center mt-2 hidden-sm-up" style="flex: 1 1 auto">
                    <div class="ml-1">
                      +57 <i class="lilIcon-attack"></i>
                    </div>
                    <div class="ml-1">
                      +57 <i class="lilIcon-health"></i>
                    </div>
                    <div class="ml-1">
                      +57 <i class="lilIcon-defense"></i>
                    </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="live-feed-content d-flex flex-column flex-grow">
        <!-- Friends Card -->
        <div>
          <div class="text-muted">
            Friends
          </div>
          <div class="d-flex align-items-center flex-grow">
            <div class="badge badge-success mr-3" style="width: 70px">Combat</div>
            <div class="flex-grow">Aessedai</div>
            <button class="btn btn-primary btn-sm mr-1">Join</button>
            <button class="btn btn-secondary btn-sm">Invite</button>
          </div>
          <div class="d-flex align-items-center flex-grow mt-1">
            <div class="badge badge-success mr-3" style="width: 70px">Mining</div>
            <div class="flex-grow">Nickbreslin</div>
            <button class="btn btn-primary btn-sm mr-1">Join</button>
            <button class="btn btn-secondary btn-sm">Invite</button>
          </div>
          <div class="d-flex align-items-center flex-grow mt-1">
            <div class="badge badge-success mr-3" style="width: 70px">Crafting</div>
            <div class="flex-grow">Entropy</div>
            <button class="btn btn-primary btn-sm mr-1">Join</button>
            <button class="btn btn-secondary btn-sm">Invite</button>
          </div>
          <div class="d-flex align-items-center flex-grow mt-1">
            <div class="badge badge-grey-1 mr-3" style="width: 70px">Offline</div>
            <div class="flex-grow">Konk353535</div>
            <button class="btn btn-primary btn-sm mr-1">Join</button>
            <button class="btn btn-secondary btn-sm">Invite</button>
          </div>
        </div>
        <div class="mt-2">
          <div class="text-muted">
            Recent Battlers
          </div>
          Todo...
          <!-- Groups of friends / Clans mates here to easily join -->
        </div>
        <div class="mt-2">
          <div class="text-muted">
            Clan
          </div>
          Todo..
          <!--
            Small list of clan mates here, clan links to the clan page where u can see everyone.
          -->
        </div>
        <div class="mt-2">
          <div class="text-muted">
            Leaderboards
          </div>
          Todo..
          <!--
            Leaderboard for your clan or game wide. Most gains for each skill / money / points. Daily / Weekly / Monthly. Maybe some kind of clan rivelery?
          -->
        </div>
      </div>
    </div>
  </div>
</template>

<template name="firstCraftingUI">
  <div class="d-flex child-show-hover icon-box-new flex-grow align-items-center mt-1" style="border: 1px solid #DFDFDF; border-radius: 4px; padding: 8px;">
    <img src="/icons/{{data.icon}}" class="extra-small-icon mr-1">
    <div class="mr-3">{{data.amount}}</div>
    <div class="progress mr-3 flex-grow">
      <div
        class="progress-bar bg-primary"
        role="progressbar"
        style="width: {{computedCraftingProcess.percentage}}%;" 
        aria-valuenow="50"
        aria-valuemin="0"
        aria-valuemax="100"
      >
        {{> formatNumber number=computedCraftingProcess.percentage}}%
      </div>
    </div>
    <div class="text-muted">{{> readableDuration endDate=computedCraftingProcess.endDate}}</div>
    <i class="fas fa-times icon-danger-hover cursor-pointer cancel-crafting ml-2" data-enddate="{{computedCraftingProcess.endDate}}"></i>
  </div>
</template>

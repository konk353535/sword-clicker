<template name="magicPage">

  {{#unless meteorUser}}
    
    <div class="d-flex justify-content-center align-items-center flex-column" style="height: 200px; margin-top: 100px;">
      <div class="mb-3">Game is loading, please wait . . .</div>
    </div>
    
  {{else if astronomySkill}}

    <ul class="nav nav-tabs my-3" style="overflow: hidden">
      <li class="nav-item spellBookTabLink">
        <a class="nav-link {{#if showSpellBookTab}}active{{/if}}" href="#"><span class="hide-on-mobile">Spell Book</span><span class="hide-on-desktop">Spells</span></a>
      </li>
      <li class="nav-item castingTabLink">
        <a class="nav-link {{#if showCastingTab}}active{{/if}}" href="#">Casting</a>
      </li>
      <li class="nav-item astronomyTabLink">
        <a class="nav-link {{#if showAstronomyTab}}active{{/if}}" href="#">Astronomy</a>
      </li>
    </ul>

    {{#if showSpellBookTab}}
      {{> spellBookTab}}
    {{else if showCastingTab}}
      {{> castingTab}}
    {{else if showAstronomyTab}}
      {{> astronomyTab}}
    {{/if}}

  {{else}}
  
    <div 
      class="d-flex justify-content-center align-items-center flex-column"
      style="height: 200px; margin-top: 100px;">
      <div class="mb-1">You haven't learned the astronomy skill yet</div>
      <div class="mb-3 d-flex">Requires:
        {{> requiredItems requiredItems=learnRequirements requirementsMet=learnRequirementsMet}}
      </div>
      {{#if hasLearnRequirements}}
        <button type="button" class="btn btn-primary learn-now">Learn Now</button>
      {{else}}
        <button type="button" class="btn btn-primary learn-now" disabled>Learn Now</button>
      {{/if}}        
    </div>
    
  {{/unless}}
</template>

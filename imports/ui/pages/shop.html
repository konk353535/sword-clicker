<template name="shopPage">
  <h2 class="my-2">Your Gems</h2>
  <div class="d-flex flex-wrap">
    <span>Free gems will occasionally appear in your mine pit (maximum of 20 per day) and can also be earned by participating in official top-floor tower battles when the tower has not been fully cleared (seasonal server, maximum of 30 per day).  Additionally, free gems are available as achievement rewards.<br /><br /></span>

    <div>Proceeds from gem purchases are used to fund server infrastructure and ongoing game costs. Game development is an unpaid volunteer effort by community members. <br/><br/></div>
  </div>
  <div class="d-flex flex-wrap">
    <div
      class="d-flex mb-1 mr-1 p-2 flex-column align-items-center justify-content-center"
      style="border: 1px solid #dfdfdf; border-radius: 4px; width: 150px">
      <img class="extra-small-icon" src="/icons/gemFree.svg">
      <span class="my-1">Free Gems</span>
      <small>{{ > formatNumber number=freeGems}}</small>
    </div>
    <div
      class="d-flex mb-1 mr-1 p-2 flex-column align-items-center justify-content-center"
      style="border: 1px solid #dfdfdf; border-radius: 4px; width: 150px">
      <img class="extra-small-icon" src="/icons/gemPaid.svg">
      <span class="my-1">Paid Gems</span>
      <small>{{ > formatNumber number=paidGems}}</small>
    </div>
    <div
      class="d-flex mb-1 mr-1 p-2 flex-column align-items-center justify-content-center"
      style="border: 1px solid #dfdfdf; border-radius: 4px; width: 150px">
      <img class="extra-small-icon" src="/icons/gems.svg">
      <span class="my-1">Total Gems</span>
      <small>{{ > formatNumber number=totalGems}}</small>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-md-3">
      <div class="card text-center mt-3 p-3">
        <h4>Bunch Of Gems</h4>
        <p class="mb-1">+ 500 <img src="/icons/gemPaid.svg" class="extra-small-icon"></p>
        <div class="d-flex justify-content-center">
          <img src="/icons/bunchOfGems.svg" class="large-icon my-3">
        </div>
        <button class="btn btn-primary {{#if processing}}disabled{{/if}}" id="purchaseButtonBunch">
          {{#if processing}}
            Processing
          {{else}}
            $4.99
          {{/if}}
        </button>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card text-center mt-3 p-3">
        <h4>Bag Of Gems</h4>
        <p class="mb-1">+ 2,200 <img src="/icons/gemPaid.svg" class="extra-small-icon"></p>
        <div class="d-flex justify-content-center">
          <img src="/icons/bagOfGems.svg" class="large-icon my-3">
        </div>
        <button class="btn btn-primary {{#if processing}}disabled{{/if}}" id="purchaseButtonBag">
          {{#if processing}}
            Processing
          {{else}}
            $19.99
          {{/if}}
        </button>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card text-center mt-3 p-3">
        <h4>Box Of Gems</h4>
        <p class="mb-1">+ 6,000 <img src="/icons/gemPaid.svg" class="extra-small-icon"></p>
        <div class="d-flex justify-content-center">
          <img src="/icons/boxOfGems.svg" class="large-icon my-3">
        </div>
        <button class="btn btn-primary {{#if processing}}disabled{{/if}}" id="purchaseButtonBox">
          {{#if processing}}
            Processing
          {{else}}
            $49.99
          {{/if}}
        </button>
      </div>
    </div>
  </div>
  <br />

  <h2 class="my-2">Global Buffs</h2>
  <div class="d-flex flex-wrap">
    <span>Global buffs can only be purchased with paid gems and affect all players across all servers while active.</span>
  </div>
  <div class="row mb-3">
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <p class="mb-1">
          {{#if globalBuffs.buffCombat}}
            <span class="my-1" alt="{{globalBuffs.buffCombat}}">Combat: {{moFromNow globalBuffs.buffCombat true}}</span>
          {{else}}
            <span class="my-1">Combat: Inactive</span>
          {{/if}}
        </p>
        <div class="d-flex justify-content-center">
          <img src="/icons/attack.svg" class="medium-icon my-3">
        </div>
        <p class="mb-1">+20% Combat XP</p>
        <p class="mb-1">+35% Astronomy XP</p>
        <p class="mb-1">+50% Combat Items Drop Chance</p>
        <p class="mb-1">Triple combat energy regeneration</p>
        <button class="btn btn-secondary buy-global-combat {{#if $gte currentUser.gems 100}}{{else}}disabled{{/if}}">
          100 <img src="/icons/gemPaid.svg" class="extra-small-icon"> +1 hour
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <p class="mb-1">
          {{#if globalBuffs.buffCrafting}}
            <span class="my-1" alt="{{globalBuffs.buffCrafting}}">Crafting: {{moFromNow globalBuffs.buffCrafting true}}</span>
          {{else}}
            <span class="my-1">Crafting: Inactive</span>
          {{/if}}
        </p>
        <div class="d-flex justify-content-center">
          <img src="/icons/crafting.svg" class="medium-icon my-3">
        </div>
        <p class="mb-1">+35% Crafting XP</p>
        <p class="mb-1">+35% Inscription XP</p>
        <p class="mb-1">+100% Jewel Drop Rate</p>
        <p class="mb-1">-50% Reforge Resource Costs</p>
        <p class="mb-1">Reduced critical failure chance</p>
        <button class="btn btn-secondary buy-global-crafting {{#if $gte currentUser.gems 100}}{{else}}disabled{{/if}}">
          100 <img src="/icons/gemPaid.svg" class="extra-small-icon"> +1 hour
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <p class="mb-1">
          {{#if globalBuffs.buffGathering}}
            <span class="my-1" alt="{{globalBuffs.buffGathering}}">Gathering: {{moFromNow globalBuffs.buffGathering true}}</span>
          {{else}}
            <span class="my-1">Gathering: Inactive</span>
          {{/if}}
        </p>
        <div class="d-flex justify-content-center">
          <img src="/icons/mining.svg" class="medium-icon my-3">
        </div>
        <p class="mb-1">+35% Mining XP</p>
        <p class="mb-1">+35% Woodcutting XP</p>
        <p class="mb-1">+35% Farming XP</p>
        <p class="mb-1">Double mining energy regeneration</p>
        <button class="btn btn-secondary buy-global-gathering {{#if $gte currentUser.gems 100}}{{else}}disabled{{/if}}">
          100 <img src="/icons/gemPaid.svg" class="extra-small-icon"> +1 hour
        </button>
      </div>
    </div>
  </div>
  <br />
  
  <!-- List of all upgrades + Time Left on them -->
  <h2 class="my-2">Your Upgrades</h2>
  <div class="d-flex flex-wrap">
    <span>Personal upgrades/buffs also let you spend more energy per fight with each upgrade you have (up to 40 energy spent with 5+ upgrades active).<br /><br /></span>
  </div>
  <div class="d-flex flex-wrap">
    {{#each currentUpgrades}}
      <div
        class="d-flex mb-1 mr-1 p-2 flex-column align-items-center justify-content-center"
        style="border: 1px solid #dfdfdf; border-radius: 4px; width: 150px">
        <img class="extra-small-icon" src="/icons/{{this.icon}}" alt="{{this.name}}">
        
        {{#if this.date}}
          <span class="my-1" alt="{{this.date}}">{{moFromNow this.date true}}</span>
        {{else}}
          <span class="my-1">Inactive</span>
        {{/if}}

        <small>
          {{{this.description}}}
        </small>
      </div>
    {{/each}}
  </div>
  <br />
  
  <h2 class="my-2">Shop</h2>
  <div class="d-flex flex-wrap">
    <span>Spend your gems here!</span>
  </div>
  <div class="row">
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>All Personal Upgrades</h4>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+20% mining damage</li>
          <li>+20% woodcutting speed</li>
          <li>+20% crafting speed</li>
          <li>+20% inscription speed</li>
          <li>+2 farming plots</li>
          <li>+20% energy regen</li>
          <li>+1 phantom mage</li>
        </div>
        <button class="buy-all-15 btn btn-secondary {{#if $gte totalGems 500}}{{else}}disabled{{/if}}">
          500 <img src="/icons/gems.svg" class="extra-small-icon"> + 15 days
        </button>
        <button class="buy-all-30 btn btn-secondary mt-1 {{#if $gte totalGems 900}}{{else}}disabled{{/if}}">
          900 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Mining Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/mining.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+20% damage</li>
        </div>
        <button class="buy-mining-30 btn btn-secondary mt-1 {{#if $gte totalGems 200}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Crafting Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/crafting.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+20% crafting speed</li>
        </div>
        <button class="buy-crafting-30 btn btn-secondary mt-1 {{#if $gte totalGems 9}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Combat Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/attack.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+20% energy regen</li>
        </div>
        <button class="buy-combat-30 btn btn-secondary mt-1 {{#if $gte totalGems 200}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Woodcutting Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/woodcutting.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+20% gather speed</li>
        </div>
        <button class="buy-woodcutting-30 btn btn-secondary mt-1 {{#if $gte totalGems 200}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Farming Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/farming.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+2 farming plots</li>
        </div>
        <button class="buy-farming-30 btn btn-secondary mt-1 {{#if $gte totalGems 200}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Inscription Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/inscription.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+20% crafting speed</li>
        </div>
        <button class="buy-inscription-30 btn btn-secondary mt-1 {{#if $gte totalGems 9}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Personal Astronomy Upgrade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/astronomy.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>+1 phantom mage</li>
        </div>
        <button class="buy-astronomy-30 btn btn-secondary mt-1 {{#if $gte totalGems 200}}{{else}}disabled{{/if}}">
          200 <img src="/icons/gems.svg" class="extra-small-icon"> + 30 days
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Enhancer Key</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/enhancerKey.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Increase item quality by up to 15%</li>
          <li>Can only be applied to an item once</li>
          <li>Key is consumed on use</li>
        </div>
        <button class="buy-enhancer-key btn btn-secondary mt-1 {{#if $gte totalGems 100}}{{else}}disabled{{/if}}">
          100 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Lemonade</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/lemonade.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Regenerate 20 combat energy instantly.</li>
        </div>
        <button class="buy-lemonade btn btn-secondary mt-1 {{#if $gte totalGems 10}}{{else}}disabled{{/if}}">
          10 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Class Cooldown Reset Token</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/classCooldownResetToken.svg" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Skips the normal 12-hour cooldown for changing classes.</li>
        </div>
        <button class="buy-class-reset-token btn btn-secondary mt-1 {{#if $gte totalGems 25}}{{else}}disabled{{/if}}">
          25 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Tank Icon Pack</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/guyT1.png" class="medium-icon my-3">
          <img src="/icons/guyT2.png" class="medium-icon my-3">
          <img src="/icons/guyT1Color.png" class="medium-icon my-3">
          <img src="/icons/guyT2Color.png" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Character icons are cosmetic only, and are available as drops in the Tower</li>
          <li>Requires at least level 60 defense to equip T2 variants</li>
          <li>Includes T1 Tank, T1 Tank Rare, T2 Tank, and T2 Tank Rare when bought</li>
        </div>
        <button class="buy-icon btn btn-secondary mt-1 {{#if $gte totalGems 300}}{{else}}disabled{{/if}}" data-icon-id="tank_pack">
          300 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Damage Icon Pack</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/oliveT1.png" class="medium-icon my-3">
          <img src="/icons/oliveT1Color.png" class="medium-icon my-3">
          <img src="/icons/oliveT2.png" class="medium-icon my-3">
          <img src="/icons/oliveT2Color.png" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Character icons are cosmetic only, and are available as drops in the Tower</li>
          <li>Requires at least level 60 attack to equip T2 variants</li>
          <li>Includes T1 Damage, T1 Damage Rare, T2 Damage, and T2 Damage Rare when bought</li>
        </div>
        <button class="buy-icon btn btn-secondary mt-1 {{#if $gte totalGems 300}}{{else}}disabled{{/if}}" data-icon-id="damage_pack">
          300 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
        <div class="card text-center mt-3 p-3">
          <h4>Archer Icon Pack</h4>
          <div class="d-flex justify-content-center">
            <img src="/icons/falconT1.png" class="medium-icon my-3">
            <img src="/icons/falconT1Color.png" class="medium-icon my-3">
            <img src="/icons/falconT2.png" class="medium-icon my-3">
            <img src="/icons/falconT2Color.png" class="medium-icon my-3">
          </div>
          <div class="d-flex flex-column justify-content-start align-items-start mb-3">
            <li>Character icons are cosmetic only, and are available as drops in the Tower</li>
            <li>Requires at least level 40 attack to equip T2 variants</li>
            <li>Includes T1 Archer, T1 Archer Rare, T2 Archer, and T2 Archer Rare when bought</li>
          </div>
          <button class="buy-icon btn btn-secondary mt-1 {{#if $gte totalGems 300}}{{else}}disabled{{/if}}" data-icon-id="archer_pack">
            300 <img src="/icons/gems.svg" class="extra-small-icon">
          </button>
        </div>
      </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Mage Icon Pack</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/mitsyT1.png" class="medium-icon my-3">
          <img src="/icons/mitsyT1Color.png" class="medium-icon my-3">
          <img src="/icons/mitsyT2.png" class="medium-icon my-3">
          <img src="/icons/mitsyT2Color.png" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Character icons are cosmetic only, and are available as drops in the Tower</li>
          <li>Requires at least level 20 magic to equip T2 variants</li>
          <li>Includes T1 Mage, T1 Mage Rare, T2 Mage, and T2 Mage Rare when bought</li>
        </div>
        <button class="buy-icon btn btn-secondary mt-1 {{#if $gte totalGems 300}}{{else}}disabled{{/if}}" data-icon-id="mage_pack">
          300 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Crow Icon Pack</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/crowT1.png" class="medium-icon my-3">
          <img src="/icons/crowT1Color.png" class="medium-icon my-3">
          <img src="/icons/crowT2.png" class="medium-icon my-3">
          <img src="/icons/crowT2Color.png" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Character icons are cosmetic only, and are available as drops in the Tower</li>
          <li>Requires at least level 60 attack to equip T2 variants</li>
          <li>Includes T1 Crow, T1 Crow Rare, T2 Crow, and T2 Crow Rare when bought</li>
        </div>
        <button class="buy-icon btn btn-secondary mt-1 {{#if $gte totalGems 300}}{{else}}disabled{{/if}}" data-icon-id="crow_pack">
          300 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center mt-3 p-3">
        <h4>Phoenix Icon Pack</h4>
        <div class="d-flex justify-content-center">
          <img src="/icons/phoenixT1.png" class="medium-icon my-3">
          <img src="/icons/phoenixT1Color.png" class="medium-icon my-3">
          <img src="/icons/phoenixT2.png" class="medium-icon my-3">
          <img src="/icons/phoenixT2Color.png" class="medium-icon my-3">
        </div>
        <div class="d-flex flex-column justify-content-start align-items-start mb-3">
          <li>Character icons are cosmetic only, and are available as drops in the Tower</li>
          <li>Requires at least level 20 magic to equip</li>
          <li>Includes T1 Phoenix, T1 Phoenix Rare, T2 Phoenix, T2 Phoenix Rare when bought</li>
        </div>
        <button class="buy-icon btn btn-secondary mt-1 {{#if $gte totalGems 300}}{{else}}disabled{{/if}}" data-icon-id="phoenix_pack">
          300 <img src="/icons/gems.svg" class="extra-small-icon">
        </button>
      </div>
    </div>
  </div>
</template>

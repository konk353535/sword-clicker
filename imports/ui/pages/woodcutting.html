<template name="woodcuttingPage">
  <div class="container mt-2">
    {{#if woodcuttingSkill}}
      {{#if upgradingWoodcuttingCarriages}}
        <a href="#" class="d-flex align-items-center cursor-pointer back-btn">
          <i class="fas fa-arrow-left fa-2x mr-2"></i>
          Back
        </a>

        {{> woodcuttingStorage}}
      {{else}}
        {{#if buyingNewWoodcutter}}
          <a href="#" class="d-flex align-items-center cursor-pointer back-btn">
            <i class="fas fa-arrow-left fa-2x mr-2"></i>
            Back
          </a>
          
          <div class="home-page-content mt-3">
            {{#each buyableWoodcutters}}
              <div class="d-flex flex-grow align-items-center mt-2">
                <div class="mr-3 medium-icon icon-box">
                  <img src="/icons/{{this.icon}}" class="ore-icon">
                </div>
                <div class="mr-3 text-capitalize hidden-md-down" style="width: 150px">{{this.name}}</div>
                <div class="mr-3 flex-grow d-flex justify-content-center">
                  <div>{{ > requiredItems requiredItems=this.required}}</div>
                </div>
                <button class="btn btn-primary hire-woodcutter" disabled="{{this.notMet}}" data-woodcutter={{this.id}}>Hire</button>
              </div>
            {{/each}}
          </div>
        {{else}}
          <div class="text-muted d-flex">
            <div class="mr-2">Lumber Carriages</div>
            <div class="d-flex align-items-center">
              <small>
                <a href="#" class="upgrade-woodcutting-carts">upgrade</a>
              </small>
            </div>
          </div>
          {{> woodcuttingCollector}}

          <div class="d-flex flex-wrap flex-grow justify-content-center" style="margin-top: 150px">
            <!-- List of my woodcutters here -->
            {{#each woodcutting.woodcutters}}
              <div class="flex-column d-flex justify-content-center flex-column align-items-center"  style="margin-left: 30px; margin-right: 30px; margin-bottom: 20px;">
                {{> itemIcon item=this classes="cursor-pointer"}}
                {{#if this.deathTime}}
                  Dies in {{moDiff this.deathTime moNow 'seconds'}}
                {{else}}
                  <button class="btn btn-danger btn-suicide btn-sm mt-1" data-index="{{@index}}">
                    {{#if this.confirmSuicide2}}
                      Kill
                    {{else if this.confirmSuicide}}
                      Confirm?!
                    {{else}}
                      Fury
                    {{/if}}
                  </button>
                {{/if}}
              </div>
            {{/each}}

            {{#if $lte woodcutting.woodcutters.length 4}}
              <div class="icon-box buy-woodcutter icon-primary-hover cursor-pointer hoverable-blue" style="margin-left: 30px; margin-right: 30px">
                <i class="fas fa-plus fa-2x"></i>
              </div>
            {{/if}}
          </div>

          <div style="margin-top: 100px">
            <div class="text-muted">Log Inventory</div>
            <div class="d-flex flex-wrap">
              {{#each logsList}}
                <div class="d-flex icon-box-border log-list-item mr-1 mt-1 p-2" title="{{this.name}}" style="min-width: 75px">
                  <div class="ore-list-item align-items-center d-flex">
                    <img src="/icons/{{this.icon}}" class="extra-small-icon mr-1">
                    <div>{{this.amount}}</div>
                  </div>
                </div>
              {{/each}}
            </div>
          </div>

          <div style="margin-top: 20px; max-width: 400px">
            {{> skillHeader skill=woodcuttingSkill small=true}}
          </div>
        {{/if}}
      {{/if}}
    {{else}}
      {{#if hasLearnRequirements}}
        <button class="btn btn-primary learn-now">Learn Now</button>
      {{else}}
        <button class="btn btn-primary learn-now" disabled>Learn Now</button>
      {{/if}}
    {{/if}}
  </div>

  <!-- Fire woodcutters modal -->
  <!-- Modal -->
  <div class="modal fireModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confirm Activation</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div>
            <span class="text-danger">
              Kill this woodcutter,
            </span> but increase it's attack speed by 1000% for 60 seconds before it dies.
          </div><br />
          Confirm you want to activate?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger confirm-fire-btn">Confirm</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="woodcuttingCollector">
  <div class="d-flex flex-wrap">
    {{#each collectors}}
      <div class="d-flex icon-box-border collector-container mr-1 mt-1 p-2" title="{{this.name}}">
        <div class="ore-list-item align-items-center d-flex">
          <img src="/icons/{{this.icon}}" class="extra-small-icon mr-1">
          <div>{{this.amount}} / {{this.storage}}</div>
        </div>
      </div>
    {{else}}
      <div class="text-muted">Empty</div>
    {{/each}}
    {{#if collectors}}
      <div class="d-flex align-items-center mt-1 ml-1">
        <button class="btn btn-primary collect-ores">
          Collect
        </button>
      </div>
    {{/if}}
  </div>
</template>
